# 裸眼3D壁纸网站 需求文档（V1.0）

文档编号：L3DWP-REQ-20250917-V1.0
版本：V1.0（初版）
作者：项目协作助手
日期：2025-09-17

1. 项目背景与目标
- 背景：打造一个专注“裸眼3D壁纸”的展示与下载站点，呈现沉浸式预览效果，提升用户获取高品质壁纸的体验。
- 目标：
  - 快速上线一个可用的最小版本（MVP），包含画廊、3D预览、基础下载与移动端适配。
  - 为后续接入深度图位移渲染、后台上传、对象存储与CDN打下基础。

2. 范围与MVP定义
- 本期范围（MVP）：
  - 首页瀑布流/网格画廊（响应式，懒加载，骨架屏）。
  - 壁纸卡片裸眼3D预览（鼠标/触控倾斜+视差，移动端重力感应作为可选项）。
  - 基础分类/标签展示（列表/标签样式，基础筛选可延后）。
  - 壁纸详情/下载（弹窗或详情页，提供多分辨率下载，作者/版权信息展示）。
  - 移动端适配（常用分辨率良好显示）。
- 非本期范围（可规划但不实现）：
  - 完整后台与鉴权、批量上传、自动生成缩略图/占位图。
  - 深度图驱动的WebGL位移渲染（列入下一期）。
  - 多维高级搜索与排序、个性化推荐。

3. 用户画像与场景
- 用户画像：
  - 喜爱3D/动态视觉的壁纸爱好者；
  - 需要高分辨率素材的设计师/创作者；
  - 手机/桌面美化用户。
- 使用场景：
  - 浏览画廊获取灵感；
  - 预览立体效果后选择合适分辨率下载；
  - 按标签/风格快速定位主题（如“科幻”“自然”）。

4. 核心功能需求（详细）
4.1 首页画廊
- 网格/瀑布流布局，断点：
  - <640px：1列；640–1024px：2列；≥1024px：3列（可按实际调整）。
- 图片懒加载、骨架屏；错误占位（加载失败时提供重试/占位图）。
- 列表数据来自本地 JSON（后续可替换为API）。

4.2 裸眼3D预览（卡片）
- 交互：鼠标移动或触控位置 → 卡片 rotateX/rotateY 倾斜，前景轻微位移（translate）产生视差。
- 动效：平滑插值（requestAnimationFrame），具备进入/离开重置态。
- 性能：transform-gpu、will-change，控制最大倾角（~10°）与最大位移（~10px）。
- 降级：不支持高性能渲染设备上保持静态卡片样式。
- 移动端（可选开关）：DeviceOrientation 重力感应视差，默认关闭并弹提示授权。

4.3 详情与下载
- 详情内容：大图预览、标题、作者、标签、版权/来源声明。
- 下载：提供多分辨率（如 1920x1080、2560x1440、3840x2160），点击即下载或新开原图。
- 交互形态：
  - MVP可用弹窗（Modal）实现；
  - 后续可拓展为独立详情页路由，支持SEO。

4.4 基础筛选与搜索（MVP可保留最小）
- 列表顶部提供简单的标签筛选（单选或多选，MVP建议单选）。
- 搜索框（标题/作者关键词）。

4.5 响应式与可用性
- 移动端点击区域足够；
- 字体与间距符合易读性；
- 深色模式支持（跟随系统）。

5. 数据与模型
5.1 数据源
- MVP 使用本地 JSON：/public/data/wallpapers.json。
- 后续替换为API或对象存储清单文件。

5.2 数据模型（Wallpaper）
- 字段：
  - id: string
  - title: string
  - author?: string
  - tags?: string[]
  - thumbnailUrl: string
  - imageUrl: string
  - depthMapUrl?: string
  - resolutions?: string[]

5.3 示例（供联调）
- 至少2~6条示例数据，包含不同标签与分辨率组合；图片可暂用 Unsplash 等外链（注明仅演示）。

6. 非功能性需求
6.1 性能
- 首屏可交互 < 2.5s（常见宽带/4G 设备）；
- 图片：lazy、合适尺寸裁剪、优先级合理、占位图（LQIP/颜色块）；
- 资源优化：使用 ESBuild/Vite 构建、按需加载组件。

6.2 兼容性
- 现代浏览器（Chrome、Edge、Safari、Firefox）近两年主流版本；
- 移动端主流机型视口适配；
- 无 JS 情况下可降级呈现基本内容（有限支持）。

6.3 SEO 与访问性
- 标题与描述、OG/Twitter Meta；
- 语义化 HTML、图片 alt 文本；
- 站点地图与Robots（后续）。

6.4 安全与版权
- 不嵌入任何密钥；
- 图片版权声明与来源保留，下载页提示用途限制；
- 防盗链/流量控制（后续接入对象存储+CDN再规划）。

7. 技术选型与架构
- 前端：Vite + React + TypeScript + TailwindCSS。
- 状态：以组件内部状态为主，后续需要时再引入全局状态方案。
- 数据：MVP 使用本地 JSON 文件；
- 渲染：CSS transform + JS 动画为主，后续引入 WebGL（三方库如 three.js 或 regl）。
- 部署：静态托管（Vercel/Netlify），后续图片资源迁移到对象存储（S3/OSS/COS）+ CDN。

8. 页面与组件清单
- 页面：
  - 首页（/）：画廊、筛选/搜索、下载入口（弹窗）。
  - 详情（/wallpaper/:id）：可后续补充（MVP可仅弹窗）。
- 关键组件：
  - WallpaperCard（3D预览卡片）
  - GalleryGrid（网格/瀑布流容器）
  - FilterBar（标签/搜索）
  - DownloadModal（下载弹窗）
  - SkeletonCard（骨架）

9. 里程碑与验收标准
- 里程碑M1（项目初始化，2天）：
  - 完成工程初始化（Vite+React+TS+Tailwind），基础样式与主题；
  - 接入本地 JSON 数据，成功渲染静态网格；
  - 验收：npm run dev 可启动，首页展示2个以上卡片。
- 里程碑M2（3D卡片与性能，3天）：
  - 实现倾斜+视差的3D卡片交互，流畅（60fps 目标）；
  - 懒加载/骨架/错误占位；
  - 验收：移动/PC 均可流畅交互，卡片离开时重置。
- 里程碑M3（下载与基础筛选，2天）：
  - 下载弹窗，展示多分辨率；
  - 标签筛选与搜索框（基本版）；
  - 验收：可根据标签过滤列表，下载链接可用。
- 里程碑M4（部署与SEO基础，1天）：
  - 部署到 Vercel/Netlify；
  - 设置基础 Meta/OG；
  - 验收：线上可访问，社交分享有预览卡片。

10. 验收用例（示例）
- 用例A：进入首页 3s 内出现骨架，5s 内首屏图片加载完成；
- 用例B：鼠标在卡片上移动，卡片倾斜与图片视差跟随，离开后 300ms 内回正；
- 用例C：在移动端，画廊 1 列展示，滚动流畅无明显掉帧；
- 用例D：点击某卡片“下载”，弹窗出现，列出 1920x1080/2560x1440 等分辨率；
- 用例E：输入关键词“mountain”后结果仅显示相关条目；
- 用例F：页面标题与描述正确显示，图片具备 alt 文本。

11. 路线图（后续版本）
- V2：
  - WebGL + 深度图位移渲染（显著增强3D效果）；
  - 设备方向感应（需用户授权），提供开关与强提醒；
  - 更丰富的筛选（多选标签、分辨率、风格）。
- V3：
  - 上传后台（鉴权、批量上传、自动生成缩略图/占位图/多规格裁剪）；
  - 接入对象存储与CDN，优化带宽与成本；
  - SEO 增强（站点地图、结构化数据）。

12. 风险与对策
- 版权风险：统一标注来源与用途限制；对接合法素材来源。
- 性能风险：严格控制图片尺寸与数量，首屏优先、渐进加载、占位图。
- 交互复杂度：先实现稳定的倾斜+视差，再引入 WebGL 位移，分阶段控制风险。
- 移动端权限：方向感应需权限，默认关闭并提供清晰开关与提示。

13. 术语
- 裸眼3D：不依赖眼镜或头显，通过视差、位移、光影等视觉线索营造立体感。
- 深度图：描述图像各像素相对深度的信息图，用于位移贴图以模拟视差。

14. 变更记录
- V1.0（2025-09-17）：初版，定义MVP范围、数据模型与验收标准。


15. 附录A：线框图与交互草图（文本版）

15.1 首页（PC）
```
┌─────────────────────────────────────────────── Header（标题 / 外链） ───────────────────────────────────────────────┐
│                                                                                                                    │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
┌──────────── FilterBar ────────────┐     ┌───────────── Search ─────────────┐
│ 标签： [All] [Nature] [City] ...  │     │  🔍 关键词____________________  │
└────────────────────────────────────┘     └───────────────────────────────────┘

┌──────── Grid（响应式：1/2/3列） ────────┐
│  [Card]   [Card]   [Card]                                                    │
│  [Card]   [Card]   [Card]                                                    │
│  ...                                                                          │
└──────────────────────────────────────────────────────────────────────────────┘

Card（Hover）
┌───────────────────────────────────────┐
│  缩略图（cover）                      │
│  ─ 3D：倾斜 rotateX/Y + 视差 translate │
│  ─ 渐变遮罩（底部）                    │
│  标题 + 作者                          │
└───────────────────────────────────────┘
```

15.2 下载弹窗（Modal）
```
┌───────────────────────────── Overlay（点击空白关闭 / ESC 关闭） ─────────────────────────────┐
│  ┌────────────────────────────── Modal ─────────────────────────────┐                        │
│  │ 标题（Wallpaper Title）   作者（Author）  标签（Tag,Tag）       │                        │
│  │ ─ 预览图（contain/cover，自适应）                              │                        │
│  │ ─ 分辨率： [1920x1080] [2560x1440] [3840x2160]（按钮/链接）     │                        │
│  │ 版权/来源声明                                                  │                        │
│  │ 关闭按钮（右上角 × 或底部“关闭”）                              │                        │
│  └─────────────────────────────────────────────────────────────────┘                        │
└────────────────────────────────────────────────────────────────────────────────────────────┘
```

15.3 移动端（Phone）
- Header 固定，FilterBar 折叠为横向滚动的标签条；
- Grid 改为 1 列；卡片高度比缩小；
- Modal 全屏底部弹出样式（sheet），保留关闭手势（向下拖拽）与按钮；
- 3D 效果幅度减小，优先保证流畅。

15.4 用户主流程（文本流程图）
```
进入首页 → 显示骨架 → 加载 wallpapers.json → 渲染网格
  ↳ 悬停/触控卡片 → 3D 倾斜与视差 → 离开复位
  ↳ 点击卡片 → 打开下载弹窗 → 选分辨率 → 下载/新开原图 → 关闭弹窗
异常：
  - 数据加载失败 → 错误提示 + 重试按钮
  - 图片加载失败 → 占位图 + 重试小图标
```


16. 附录B：交互细节规范
- 卡片 3D：
  - 最大倾角：±10°（PC），±6°（触屏）；
  - 视差位移：±10px；图像 scale(1.03)；
  - 动画插值：每帧 rAF 线性插值（0.12~0.15）；
  - 透视：perspective ≈ 1000px，transform-style: preserve-3d；
  - 离开复位：200~300ms 内平滑归零；
  - 性能：开启 will-change / transform-gpu；
  - 降级：低性能设备直接禁用倾斜/视差，仅保留静态卡片。
- 触控/移动：
  - pointermove 支持；防止滚动冲突（阈值判断）；
  - 移动端“重力感应视差”（可选）：需权限授权，默认关闭，开关在 FilterBar 右侧菜单；设最大倾角 4°，节流 30~60Hz。
- 键盘与可达性：
  - Tab 可聚焦卡片，Enter 打开弹窗；
  - 弹窗支持 ESC 关闭；
  - 焦点陷阱（Focus Trap），打开时锁定滚动；
  - 背景点击关闭但内部点击不冒泡。
- 骨架与懒加载：
  - 首屏 6~9 个 Skeleton 占位；
  - 图片使用 loading="lazy"，并在进入视口前预加载小图。


17. 附录C：SEO / Meta 规范细化
- 首页：
  - title：裸眼3D壁纸库 | 高清立体壁纸在线预览与下载；
  - description：精选高清裸眼3D壁纸，在线预览立体效果，支持多分辨率下载与移动端适配；
  - OG/Twitter：og:title、og:description、og:image、og:url、twitter:card；
  - canonical：站点主域；
  - 结构化数据（后续）：BreadcrumbList / CollectionPage。
- 壁纸详情/弹窗：
  - 标题模式：{Title} | 裸眼3D壁纸；
  - 描述：包含作者、标签要点；
  - OG 图：取壁纸缩略图，或生成带标题覆盖的分享图（后续）。
- robots 与 sitemap：
  - robots.txt（后续）控制抓取；
  - sitemap.xml（后续）用于收录。


18. 附录D：可访问性（a11y）与国际化（i18n）
- a11y：
  - 所有图片提供 alt（规则：{title} by {author}，缺省使用 title）；
  - 对交互元素提供 aria-label，Modal 有 aria-modal=true 与 role=dialog；
  - 颜色对比满足 WCAG AA（文本对比 ≥ 4.5:1）；
  - prefers-reduced-motion：降低或关闭卡片倾斜与过渡时长；
  - 键盘顺序符合视觉顺序，Focus 样式明显。
- i18n：
  - 文案集中管理（后续）；
  - 方向性 LTR；支持多语言扩展占位。


19. 附录E：数据与文件组织约定
- 数据（public/data/wallpapers.json）：
  - id（短 id，唯一）、title、author?、tags[]、thumbnailUrl、imageUrl、depthMapUrl?、resolutions[]；
  - tags：使用小写中划线风格（如 "neo-city"），避免空格；
  - resolutions：字符串 "宽x高"，如 "1920x1080"；
  - 图片来源仅用于演示，需保留版权声明字段（可选 sourceUrl）。
- 目录建议：
  - src/components：可复用组件（WallpaperCard、DownloadModal、FilterBar、SkeletonCard 等）；
  - src/pages：页面组件（Home 等）；
  - src/types.ts：类型定义；
  - public/data：演示数据；
  - public/assets：图标/占位资源。


20. 附录F：开发规范与代码约定
- TypeScript：开启严格模式；
- 命名：驼峰（变量/函数）、帕斯卡（组件/类型）；
- 样式：优先 Tailwind 工具类，少量自定义变量；
- 组件：无状态优先，可预见时机再抽升状态；
- 代码质量：建议引入 ESLint + Prettier（后续）；
- 提交信息：遵循 feat/fix/chore/docs/refactor/style/test/build 等前缀（可选）。


21. 附录G：任务拆分与下一步
- A. 线框与交互确认（当前）：确认附录A/B 的交互与布局细节；
- B. 工程初始化：Vite+React+TS+Tailwind；
- C. 数据接入：搭建 wallpapers.json 与类型定义；
- D. 组件搭建：SkeletonCard、WallpaperCard（3D）、GalleryGrid；
- E. 功能完善：DownloadModal、FilterBar（单选标签）、搜索框；
- F. 性能优化：lazy、占位、小图预加载、srcset；
- G. SEO 基础：页面 title/description/OG；
- H. 部署：Vercel/Netlify；
- I. 回顾与规划：评估引入 WebGL + depthMap 的技术可行性。


22. 附录H：视觉风格与UI元素参考（参考站点风格灵感，不复制其内容/素材）
- 整体基调：简洁、内容优先、留白充足；浅色主题默认、深色模式同步支持。
- 配色建议（Tailwind 近似）：
  - 背景：gray-50（#F9FAFB）/ dark: gray-900（#111827）
  - 文字：gray-900（主）/ gray-600（次）/ dark 下相应反转
  - 主色：blue-500/600（链接与主按钮）；辅助：emerald-500（成功）、rose-500（警示）
  - 阴影：rgba(0,0,0,0.06~0.16)，hover 时略增强
- 圆角与阴影：
  - 卡片圆角 12–16px；按钮与输入框 8–10px；
  - 默认 shadow-md，hover 至 shadow-lg，避免过强阴影拖影。
- 版心与间距：
  - 容器最大宽度 1200–1280px；两侧内边距：16px（<640）、24px（≥640）、32px（≥1024）。
  - 网格间距 gap：16px（手机）、20px（平板）、24px（桌面）。
- Header：
  - 左侧 Logo（字标或简洁图形），中部搜索框（圆角、带放大镜 icon），右侧“收藏/下载入口（后续）/登录”占位。
  - 滚动吸顶、背景半透明+模糊（backdrop-blur）。
- 导航与标签（Chips）：
  - 横向滚动标签条；选中项主色高亮，未选项灰度边框；移动端可左右滑动。
- 卡片（WallpaperCard）：
  - 图片 cover 填充，高度 240–280px（手机 200–220px）；底部渐变遮罩；左下角标题+作者。
  - 悬浮/聚焦显示“下载”按钮（桌面），移动端通过详情/弹窗提供下载。
  - 裸眼3D效果：倾斜 rotateX/Y + 轻视差 translate，幅度适中，保证流畅。
- 列表加载：
  - Skeleton 骨架卡 6–9 个；触底加载更多或“加载更多”按钮（MVP 二选一）。
- 弹窗（DownloadModal）：
  - 居中、圆角 16px、背景模糊蒙层 0.6–0.7；标题/作者/标签清晰分区；分辨率按钮一行或多行铺陈。
- 图标与插图：
  - 采用线性图标（例如 Heroicons 风格），统一 20/24px；插图尽量简约，避免喧宾夺主。

23. 附录I：布局规格与响应断点
- 栅格断点（MVP）：
  - <640px：1 列；640–1024px：2 列；≥1024px：3 列。
- 容器与排版：
  - 主容器 max-w-6xl（约 1152px）；章节上下边距 24–40px；
  - 标题层级：H1 24–28px、H2 18–20px、正文 14–16px（移动端略减）。
- 交互距离：
  - 可点击区域最小 40×40px；控件间距 8–12px；段落间距 12–16px。

24. 附录J：与参考站点对齐项清单（MVP）
- 建议对齐：
  - 顶部吸顶 Header（左 Logo / 中搜索 / 右操作入口占位）。
  - 横向标签（chips）作为一级筛选维度，移动端支持横滑。
  - 内容为中心的大缩略图网格，卡片圆角与柔和阴影，鼠标悬浮有轻微交互。
  - 下载路径清晰：卡片→弹窗→分辨率按钮，信息层级明确。
- 暂不同步的内容（保留后续规划）：
  - 广告位/商业化模块；
  - 登录后个性化（收藏、历史、评论等）；
  - 多维高级排序与权重算法。
- 合规说明：仅参考布局与交互风格，不复制其文字、图片等受版权保护的素材；本站图片需保留来源与版权声明。

25. 决策确认（视觉/交互关键项）
- 1) 站点名称与 Logo 字标：使用文字 Logo「3Dwallpaper」。
  - 应用位置：Header 左侧文字标识；Favicon/图标后续再设计。
  - 文案规范：英文单词形式，首字母大写可选：3Dwallpaper / 3DWallpaper（视觉评审时定稿）。
- 2) 主题与背景色：支持浅/深两套模式。
  - 浅色模式背景：#F8F8F5。
  - 深色模式背景（自上而下渐变）：#000616 → #4A3F4A（建议 CSS：linear-gradient(180deg, #000616 0%, #4A3F4A 100%)）。
  - 说明：深色下文字/分隔线需提高对比度；卡片阴影降低，边框微增强（1px 半透明）。
- 3) Header 搜索框：布局选 A（居中定宽）。
  - 结构：左 Logo，中部搜索框（定宽 560–640px，移动端全宽），右侧保留入口占位。
  - 风格：参考所述站点的移动端样式基调，但去掉“壁纸社区、头像制作”入口，仅保留与壁纸浏览/下载相关入口。
  - 吸顶效果：滚动时保持吸顶，背景半透明 + 模糊（backdrop-blur）。
- 4) 列表加载方式：选 A（触底自动加载）。
  - 技术：IntersectionObserver 监听最后一行；回退方案为“加载更多”按钮以应对兼容性/性能问题。
  - 分页：建议每次加载 12–18 张，视图片体积调整。
- 5) 卡片网格密度：选 B（中密度）。
  - 建议：卡片圆角 16px；桌面端 gap 24、平板 20、手机 16；卡片高度 240–280px（手机 200–220px）。
- 6) 右上角入口占位：选 是。
  - 位置与数量：右上角预留 2–3 个入口位（如 收藏/下载中心/登录），MVP 阶段仅放样式与占位，不实现功能。

影响与对齐（与现有附录/线框的衔接）
- 附录H（视觉风格）：
  - 已采纳浅色背景 #F8F8F5，深色背景渐变 #000616→#4A3F4A；主按钮/链接色保持 blue-500/600（如需更换主色可另行决策）。
  - Header 样式与搜索框居中定宽同步更新；删除“壁纸社区、头像制作”的导航项。
- 附录I（响应断点与布局）：
  - 不变更断点；强调搜索框在 ≥1024px 定宽，<1024px 自适应宽度。
- 附录J（对齐项清单）：
  - 将“触底自动加载”列为本期对齐项；右上角入口保留样式占位。
- 附录A（线框）：
  - 首页线框中 Header 中部为居中定宽搜索框；列表加载标注为“触底自动加载”。

实现要点（开发提示）
- 主题背景：
  - 浅色：body 背景色 #F8F8F5；深色：body 或顶层容器使用线性渐变背景，避免滚动抖动。
- 自动加载：
  - 使用 IntersectionObserver + 防抖/锁避免重复触发；渲染端控制最小批次，保持流畅。
- 3D 卡片：
  - 依据中密度布局调整倾角与视差幅度，确保 hover 状态不与相邻卡片产生视觉干扰。

26. 决策更新（筛选与标签策略）
- 最新决定：暂不引入风格类标签（如自然、城市、科幻、抽象等）；仅保留两项分类选项：
  - 手机壁纸
  - 桌面壁纸
- 影响范围与调整：
  - 附录A（线框与交互草图）：FilterBar 仅展示「手机壁纸 / 桌面壁纸」两枚 Chips，可横向滚动容器保留以便后续扩展。
  - 附录B（交互细节）：筛选逻辑仅切换两类视图或数据集；标签多选暂不支持。
  - 附录E（数据与文件）：wallpapers.json 可添加字段 deviceType: "mobile" | "desktop" 以便前端筛选（非强制，亦可通过分辨率/比例推断）。
  - 附录J（对齐项清单）：更新为以设备类别为一级筛选维度；风格标签纳入后续版本。
  - 主文 4.4 的“基础筛选与搜索”保持描述不变，但以本节的决定为优先执行标准。

附注：本次补充变更（4）
- 日期：2025-09-17
- 内容：将筛选标签策略明确为仅保留「手机壁纸 / 桌面壁纸」，暂不启用风格类标签，以减小MVP复杂度并聚焦主要使用场景。